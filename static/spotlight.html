<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>방송 화면</title>
<style>
:root{
  --bg:#ffffff;
  --paper:#eef1f5;
  --text:#121317;
  --shadow:0 18px 50px rgba(26,29,44,.15);
}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);
  font-family:Pretendard,ui-sans-serif,system-ui,"Noto Sans KR","Malgun Gothic",sans-serif;}
.stage{height:100%;display:flex;align-items:center;justify-content:center;padding:4vmin;}
.bubble{max-width:1300px;background:var(--paper);border-radius:22px;
  padding:4.5vmin 5.5vmin;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,.06);}
.q{text-align:center;font-weight:800;letter-spacing:-.02em;line-height:1.28;
  font-size:clamp(22px,4.2vmin,44px);}
.brand{position:fixed;right:24px;bottom:20px;pointer-events:none;}
.brand__img{height:28px;width:auto;image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges;}
</style>
</head>
<body>
<div class="stage">
  <div class="bubble">
    <div id="q" class="q">방송할 질문을 선택해 주세요.</div>
  </div>
</div>

<picture class="brand">
  <source srcset="/static/img/logo-sanofi.svg" type="image/svg+xml" />
  <source srcset="/static/img/logo-sanofi@2x.png 2x, /static/img/logo-sanofi.png 1x" type="image/png" />
  <img src="/static/img/logo-sanofi.png" alt="sanofi" class="brand__img" decoding="async" loading="eager" />
</picture>

<script>
const qEl=document.getElementById("q");let questions=[],activeId=null;
function render(){
  if(!activeId){qEl.textContent="방송할 질문을 선택해 주세요.";return;}
  const q=questions.find(x=>x.id===activeId);
  qEl.textContent=q?q.text:"방송할 질문을 선택해 주세요.";
}
const es=new EventSource("/sse");
es.addEventListener("init",e=>{const d=JSON.parse(e.data);questions=d.questions;activeId=d.activeId;render();});
es.addEventListener("questions",e=>{questions=JSON.parse(e.data);render();});
es.addEventListener("spotlight",e=>{activeId=JSON.parse(e.data).activeId;render();});
</script>
</body>
</html>
